<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>信長の野望online 英傑の絆 計算機</title>
</head>
<body>

  <h1>信長の野望online 英傑の絆 計算機</h1>

  <h2>基準となる限界突破とステータス</h2>
  <p>
    <label for="level-input">限界突破</label>
    <input type="number" name="level" id="level-input" value="0" step="1" min="0" max="4">
  </p>
  <p>
    <label for="status-input">ステータス</label>
    <input type="number" name="status" id="status-input" value="1000" step="1" min="0" max="200000">
  </p>

  <h2>絆 上昇値</h2>
  <p>
    <label for="bond-input">絆 上昇値</label>
    <input type="number" name="bond" id="bond-input" value="0" step="1" min="0" max="200000" readonly>
  </p>

  <h2>上記の上昇値を得られる限界突破とステータス</h2>
  <ul>
  <li>
    <label for="level0-input">限界突破 0</label>
    <input type="number" name="level0" id="level0-input" value="0" step="1" min="0" max="200000" readonly>
  </li>
  <li>
    <label for="level1-input">限界突破 1</label>
    <input type="number" name="level1" id="level1-input" value="0" step="1" min="0" max="200000" readonly>
  </li>
  <li>
    <label for="level2-input">限界突破 2</label>
    <input type="number" name="level2" id="level2-input" value="0" step="1" min="0" max="200000" readonly>
  </li>
  <li>
    <label for="level3-input">限界突破 3</label>
    <input type="number" name="level3" id="level3-input" value="0" step="1" min="0" max="200000" readonly>
  </li>
  <li>
    <label for="level4-input">限界突破 4</label>
    <input type="number" name="level4" id="level4-input" value="0" step="1" min="0" max="200000" readonly>
  </li>
  </ul>

  <script>
    function CalcBond(level, status){
	return Math.ceil(((level + 6) * status) / 100);
    }
    function CalcStatus(level, bond){
	return Math.ceil((bond * 100) / (level + 6));
    }
    function Update() {
	let level = parseInt(document.getElementById('level-input').value, 10);
	let status = parseInt(document.getElementById('status-input').value, 10);
	let bond_input = document.getElementById('bond-input');
	const bond = CalcBond(level, status);
	bond_input.value = bond;

	let level_input_array = ['level0-input', 'level1-input', 'level2-input', 'level3-input', 'level4-input']
	for (var i = 0; i < level_input_array.length; i++) {
	    let leveli_input = document.getElementById(level_input_array[i]);
	    leveli_input.value = CalcStatus(i, bond);
	}
    }

    let level_input = document.getElementById('level-input');
    level_input.addEventListener('input', () => {
	Update();
    });

    let status_input = document.getElementById('status-input');
    status_input.addEventListener('input', () => {
	Update();
    });

    window.onload = Update;
  </script>

</body>
</html>
